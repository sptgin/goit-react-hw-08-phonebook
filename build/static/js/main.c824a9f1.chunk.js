(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{59:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),c=n(24),s=n.n(c),a=n(4),o=n(25),l=n.n(o),u=(n(59),{getName:function(e){return e.auth.user.name},getToken:function(e){return e.auth.token},getFilter:function(e){return e.filter},isLogin:function(e){return e.auth.isLoggedIn}}),d=n(10),j=n(29),b=n(13),m=Object(j.a)({reducerPath:"phoneBookApi",baseQuery:Object(b.d)({baseUrl:"https://connections-api.herokuapp.com/",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","".concat(n)),e}}),tagTypes:["Contacts"],endpoints:function(e){return{getContacts:e.query({query:function(){return"contacts"},providesTags:function(e){return e?[].concat(Object(d.a)(e.map((function(e){return{type:"Contacts",id:e.id}}))),[{type:"Contacts",id:"LIST"}]):[{type:"Contacts",id:"LIST"}]}}),addContact:e.mutation({query:function(e){return{url:"contacts",method:"POST",body:e}},invalidatesTags:[{type:"Contacts",id:"LIST"}]}),delContact:e.mutation({query:function(e){return{url:"contacts/".concat(e),method:"DELETE"}},invalidatesTags:function(e,t,n){return[{type:"Contacts",id:n}]}}),signup:e.mutation({query:function(e){return{url:"/users/signup",method:"POST",body:e}}}),login:e.mutation({query:function(e){return{url:"/users/login",method:"POST",body:e}}}),logout:e.mutation({query:function(){return{url:"/users/logout",method:"POST"}}}),getCurrentUser:e.query({query:function(){return"/users/current"}})}}}),h=m.useGetContactsQuery,O=m.useDelContactMutation,p=m.useAddContactMutation,f=m.useSignupMutation,x=m.useLoginMutation,g=m.useLogoutMutation,_=m.useGetCurrentUserQuery,v=n(2),y=Object(v.d)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},reducers:{setCredentials:function(e,t){var n=t.payload,i=n.user,r=n.token;e.user=i,e.token=r,e.isLoggedIn=!0},setUser:function(e,t){var n=t.payload;e.user.name=n.name,e.isLoggedIn=!0},setLogout:function(e,t){e.name="",e.token=null,e.isLoggedIn=!1}}}),N=Object(v.d)({name:"filter",initialState:"",reducers:{setFilter:function(e,t){return t.payload}}}),q=N.actions.setFilter,k=y.actions,w=k.setCredentials,C=k.setUser,L=k.setLogout,S=(n(61),n(8)),T=n(18),A=n(3),P=(n(62),n(1));var F=function(e){var t=e.title,n=e.children;return Object(P.jsxs)("div",{className:"task__section",children:[t&&Object(P.jsx)("h2",{children:t}),n]})};n(64);function I(){var e=Object(a.e)(u.isLogin),t=g(),n=Object(S.a)(t,1)[0],i=Object(a.d)(),r=Object(A.g)();return Object(P.jsx)("div",{children:Object(P.jsx)(F,{title:"",children:Object(P.jsxs)("nav",{className:"mainmenu__nav",children:[Object(P.jsxs)("ul",{className:"mainmenu__list",children:[Object(P.jsx)("li",{className:"mainmenu__list-item",children:Object(P.jsx)(T.b,{className:"mainmenu__link",to:"/",children:"Home"})}),Object(P.jsx)("li",{className:"mainmenu__list-item",children:Object(P.jsx)(T.b,{className:"mainmenu__link",to:"/contacts",children:"Phonebook"})})]}),!e&&Object(P.jsxs)("ul",{className:"mainmenu__loginlist",children:[Object(P.jsx)("li",{className:"mainmenu__loginlist-item",children:Object(P.jsx)(T.b,{className:"mainmenu__link",to:"/login",children:"Login"})}),Object(P.jsx)("li",{className:"mainmenu__loginlist-item",children:Object(P.jsx)(T.b,{className:"mainmenu__link",to:"/register",children:"Register"})})]}),e&&Object(P.jsx)("div",{children:Object(P.jsx)("button",{className:"mainmenu__form-button",type:"button",onClick:function(){n(),i(L()),r("/")},children:"Logout"})})]})})})}function z(){return Object(P.jsx)(P.Fragment,{})}var R=n(12),E=n(22);n(66);function M(){var e,t,n=Object(E.a)(),i=n.register,r=n.handleSubmit,c=n.reset,s=n.formState.errors,o=x(),l=Object(S.a)(o,1)[0],u=Object(a.d)();return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("form",{className:"login__form",onSubmit:r((function(e){l(e).unwrap().then((function(e){u(w(e))})).catch((function(e){return alert("Login or password is invalid!")})),c()})),children:[Object(P.jsxs)("label",{className:"login__form-label",children:["Email",Object(P.jsx)("input",Object(R.a)(Object(R.a)({className:"login__form-input"},i("email",{required:!0})),{},{title:"email",type:"email"})),"required"===(null===s||void 0===s||null===(e=s.name)||void 0===e?void 0:e.type)&&Object(P.jsx)("p",{children:"This field is required ..."})]}),Object(P.jsxs)("label",{className:"login__form-label",children:["Password",Object(P.jsx)("input",Object(R.a)(Object(R.a)({className:"login__form-input"},i("password",{required:!0})),{},{title:"password",type:"password"})),"required"===(null===s||void 0===s||null===(t=s.password)||void 0===t?void 0:t.type)&&Object(P.jsx)("p",{children:"This field is required ..."})]}),Object(P.jsx)("button",{className:"login__form-button",type:"submit",children:"Log in"})]})})}function Z(){return Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(F,{title:"Log in",children:Object(P.jsx)(M,{})})})}var U=n(7),D=n.n(U),B=n(16);n(67);function H(){var e,t,n,i,r,c=f(),s=Object(S.a)(c,1)[0],o=Object(E.a)(),l=o.register,u=o.handleSubmit,d=o.reset,j=o.formState.errors,b=Object(a.d)(),m=function(){var e=Object(B.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t).unwrap();case 3:n=e.sent,b(w(n)),d(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("form",{className:"register__form",onSubmit:u(m),children:[Object(P.jsxs)("label",{className:"register__form-label",children:["Name",Object(P.jsx)("input",Object(R.a)(Object(R.a)({className:"register__form-input"},l("name",{required:!0,pattern:/^[a-zA-Z\u0430-\u044f\u0410-\u042f0-9](_(?!(\.|_))|\.(?!(_|\.))|[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]){2,18}[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]$/})),{},{title:"Name",type:"text",placeholder:"Name"})),"required"===(null===j||void 0===j||null===(e=j.name)||void 0===e?void 0:e.type)&&Object(P.jsx)("p",{children:"This field is required ..."}),"pattern"===(null===j||void 0===j||null===(t=j.name)||void 0===t?void 0:t.type)&&Object(P.jsx)("p",{children:"Characters only"})]}),Object(P.jsxs)("label",{className:"register__form-label",children:["Email",Object(P.jsx)("input",Object(R.a)(Object(R.a)({className:"register__form-input"},l("email",{required:!0,type:"email"})),{},{title:"email",type:"email",placeholder:"abc@abc.com"})),"required"===(null===j||void 0===j||null===(n=j.email)||void 0===n?void 0:n.type)&&Object(P.jsx)("p",{children:"This field is required ..."})]}),Object(P.jsxs)("label",{className:"register__form-label",children:["Password",Object(P.jsx)("input",Object(R.a)(Object(R.a)({className:"register__form-input"},l("password",{required:!0,minLength:7})),{},{title:"Input your password",type:"password",placeholder:"min 7 char"})),"required"===(null===j||void 0===j||null===(i=j.password)||void 0===i?void 0:i.type)&&Object(P.jsx)("p",{children:"This field is required ..."}),"minLength"===(null===j||void 0===j||null===(r=j.password)||void 0===r?void 0:r.type)&&Object(P.jsx)("p",{children:"Password must contain minimum 7 charts"})]}),Object(P.jsx)("button",{className:"register__form-button",type:"submit",children:"Register"})]})})}function J(){return Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(F,{title:"Register",children:Object(P.jsx)(H,{})})})}var Q=n(6),G=n.n(Q);n(68);function W(){var e,t,n,i,r=Object(E.a)(),c=r.register,s=r.handleSubmit,a=r.reset,o=r.formState.errors,l=h().data,u=p(),d=Object(S.a)(u,1)[0];return Object(P.jsxs)("form",{className:"contacts__form",onSubmit:s((function(e){console.log(l),l.some((function(t){return t.name.toLowerCase()===e.name.toLowerCase()}))?alert("".concat(e.name," is already exists")):(d(e),a())})),children:[Object(P.jsxs)("label",{className:"contcts__form-label",children:["Name",Object(P.jsx)("input",Object(R.a)({className:"contcts__form-input",type:"text",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f."},c("name",{required:!0,pattern:/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/}))),"required"===(null===o||void 0===o||null===(e=o.name)||void 0===e?void 0:e.type)&&Object(P.jsx)("p",{children:"This field is required"}),"pattern"===(null===o||void 0===o||null===(t=o.name)||void 0===t?void 0:t.type)&&Object(P.jsx)("p",{children:"Alphabetical characters only"})]}),Object(P.jsxs)("label",{className:"contcts__form-label",children:["Phone",Object(P.jsx)("input",Object(R.a)(Object(R.a)({className:"contcts__form-input",type:"tel"},c("number",{required:!0,pattern:/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/})),{},{title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +"})),"required"===(null===o||void 0===o||null===(n=o.number)||void 0===n?void 0:n.type)&&Object(P.jsx)("p",{children:"This field is required"}),"pattern"===(null===o||void 0===o||null===(i=o.number)||void 0===i?void 0:i.type)&&Object(P.jsx)("p",{children:"Numeric characters only"})]}),Object(P.jsx)("button",{className:"contacts__form-button",type:"submit",children:"Add contact"})]})}W.PropsType={onSubmit:G.a.func.isRequired};n(69);function $(){var e=Object(a.e)((function(e){return e.filter})),t=Object(a.d)();return Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{className:"filter__header",children:"Find contacts by name :"}),Object(P.jsx)("input",{type:"text",name:"filter",value:e,className:"filter__input",onChange:function(e){return t(q(e.target.value))}})]})}n(70);function K(e){var t=e.contact,n=O(),i=Object(S.a)(n,1)[0];return Object(P.jsxs)("li",{className:"contact__list-item",children:[Object(P.jsxs)("div",{children:[t.name,": ",t.number]}),Object(P.jsx)("button",{className:"contact__list-delete-button",type:"submit",id:t.id,onClick:function(){return i(t.id)},children:"Delete"})]})}K.prototype={id:G.a.number.isRequired,name:G.a.string.isRequired,number:G.a.number.isRequired,onDeleteContact:G.a.func.isRequired};n(71);var V=function(){return Object(P.jsx)(l.a,{className:"SpinnerLoader",type:"Watch",color:"#808080",height:100,width:100,timeout:3e3})};n(72);function X(){var e=Object(a.e)((function(e){return e.filter})),t=h(),n=t.data,i=t.isFetching;return Object(P.jsxs)("div",{children:[i&&Object(P.jsx)(V,{}),n&&!i&&Object(P.jsx)("ul",{className:"contact__list",children:n.filter((function(t){return t.name.toLocaleLowerCase().includes(e.toLowerCase())})).map((function(e){return Object(P.jsx)(K,{className:"contacts__list-item",contact:e},e.id)}))})]})}function Y(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(F,{title:"Phonebook",children:Object(P.jsx)(W,{})}),Object(P.jsxs)(F,{title:"Contacts",children:[Object(P.jsx)($,{}),Object(P.jsx)(X,{})]})]})}function ee(e){var t=e.isAuth,n=e.component;return Object(P.jsx)(P.Fragment,{children:t?Object(P.jsx)(A.a,{to:"/contacts"}):Object(P.jsx)(n,{})})}function te(e){var t=e.isAuth,n=e.component;return Object(P.jsx)(P.Fragment,{children:t?Object(P.jsx)(n,{}):Object(P.jsx)(A.a,{to:"/"})})}function ne(){var e=Object(a.d)(),t=Object(a.e)(u.isLogin),n=Object(a.e)(u.getToken),r=_("",{skip:null===n||n&&t}).data;return Object(i.useEffect)((function(){t||r&&e(C(r))}),[r,e,t]),Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{className:"header__main",children:"React HW 008 Phonebook"}),Object(P.jsx)(I,{}),Object(P.jsx)("main",{children:Object(P.jsxs)(A.d,{children:[Object(P.jsx)(A.b,{path:"/",element:Object(P.jsx)(ee,{isAuth:t,component:z})}),Object(P.jsx)(A.b,{path:"/login",element:Object(P.jsx)(ee,{isAuth:t,component:Z})}),Object(P.jsx)(A.b,{path:"/register",element:Object(P.jsx)(ee,{isAuth:t,component:J})}),Object(P.jsx)(A.b,{path:"/contacts",element:Object(P.jsx)(te,{isAuth:t,component:Y})})]})})]})}var ie,re=n(14),ce=n(20),se=n(30),ae={key:"auth",storage:n.n(se).a,whitelist:["token"]},oe=Object(ce.g)(ae,y.reducer),le=Object(v.a)({reducer:(ie={},Object(re.a)(ie,m.reducerPath,m.reducer),Object(re.a)(ie,"filter",N.reducer),Object(re.a)(ie,"auth",oe),ie),middleware:function(e){return e({serializableCheck:{ignoredActions:[ce.a,ce.f,ce.b,ce.c,ce.d,ce.e]}}).concat(m.middleware)}}),ue=Object(ce.h)(le),de=n(31);s.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(a.a,{store:le,children:Object(P.jsx)(de.a,{loading:Object(P.jsx)(l.a,{}),persistor:ue,children:Object(P.jsx)(T.a,{children:Object(P.jsx)(ne,{})})})})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.c824a9f1.chunk.js.map